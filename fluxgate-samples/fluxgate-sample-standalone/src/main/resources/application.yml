server:
  port: 8085

spring:
  application:
    name: fluxgate-sample-standalone

# FluxGate Configuration
fluxgate:
  # MongoDB configuration (uses FluxgateMongoAutoConfiguration)
  mongo:
    enabled: true
    uri: mongodb://fluxgate:fluxgate123@localhost:27017/fluxgate?authSource=admin
    database: fluxgate
    rule-collection: rate_limit_rules
    # Optional: Enable event logging by setting event-collection
    event-collection: rate_limit_events
    # DDL auto mode: validate (default) or create
    ddl-auto: validate
  # Redis configuration (uses FluxgateConfig)
  redis:
    uri: redis://127.0.0.1:7100,redis://127.0.0.1:7101,redis://127.0.0.1:7102
    #uri: redis://localhost:6379
  # Metrics enable for Prometheus
  metrics:
    enabled: true

logging:
  level:
    org.fluxgate: DEBUG
    org.fluxgate.sample.standalone: DEBUG
    root: info

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics,conditions
  endpoint:
    prometheus:
      enabled: true

# Swagger/OpenAPI
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha

---
# Docker profile (when running with docker-compose)
spring:
  config:
    activate:
      on-profile: docker

fluxgate:
  mongo:
    enabled: true
    uri: mongodb://fluxgate:fluxgate123@mongodb:27017/fluxgate?authSource=admin
    rule-collection: rate_limit_rules
    event-collection: rate_limit_events
    ddl-auto: create
  redis:
    uri: redis://127.0.0.1:7100,redis://127.0.0.1:7101,redis://127.0.0.1:7102
    #uri: redis://redis:6379
